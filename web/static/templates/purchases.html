{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="/static/css/purchases.css">
{% endblock %}

{% block content %}
<div class="content-container">
    <h2>Ваші придбані продукти</h2>

    <div class="categories">
        <h3>Аудіо</h3>
        {% if products.audio|length > 0 %}
        <div class="products-grid">
            {% for product in products.audio %}
            <div class="product-card">
                <img src="{{ product.ImageURL }}" alt="{{ product.Name }}" class="product-image">
                <div class="product-info">
                    <h3>{{ product.Name }}</h3>
                    <p>Власник: {{ product.Owner }}</p>
                    {% if product.Genre %}
                    <p>Жанр: {{ product.Genre }}</p>
                    {% endif %}
                    <div class="product-card-buttons">
                        <a href="/product/{{ product.Name }}/{{ product.Owner }}" class="btn btn-primary btn-block">Деталі</a>
                        {% if product.Type == "audio" %}
                        <button onclick="playAudio('{{ product.Id }}')" class="btn btn-secondary btn-block">Відтворити</button>
                        {% endif %}
                        <form action="/download/{{ product.Id }}" method="post">
                            <button type="submit" class="btn btn-secondary btn-block">Завантажити</button>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p>У вас немає придбаних аудіо продуктів</p>
        {% endif %}
        
        <h3>MIDI</h3>
        {% if products.midi|length > 0 %}
        <div class="products-grid">
            {% for product in products.midi %}
            <div class="product-card">
                <img src="{{ product.ImageURL }}" alt="{{ product.Name }}" class="product-image">
                <div class="product-info">
                    <h3>{{ product.Name }}</h3>
                    <p>Власник: {{ product.Owner }}</p>
                    {% if product.Genre %}
                    <p>Жанр: {{ product.Genre }}</p>
                    {% endif %}
                    <div class="product-card-buttons">
                        <a href="/product/{{ product.Name }}/{{ product.Owner }}" class="btn btn-primary btn-block">Деталі</a>
                        <form action="/download/{{ product.Id }}" method="post">
                            <button type="submit" class="btn btn-secondary btn-block">Завантажити</button>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p>У вас немає придбаних MIDI продуктів</p>
        {% endif %}
        
        <h3>Семпли</h3>
        {% if products.samples|length > 0 %}
        <div class="products-grid">
            {% for product in products.samples %}
            <div class="product-card">
                <img src="{{ product.ImageURL }}" alt="{{ product.Name }}" class="product-image">
                <div class="product-info">
                    <h3>{{ product.Name }}</h3>
                    <p>Власник: {{ product.Owner }}</p>
                    {% if product.Genre %}
                    <p>Жанр: {{ product.Genre }}</p>
                    {% endif %}
                    <div class="product-card-buttons">
                        <a href="/product/{{ product.Name }}/{{ product.Owner }}" class="btn btn-primary btn-block">Деталі</a>
                        <form action="/download/{{ product.Id }}" method="post">
                            <button type="submit" class="btn btn-secondary btn-block">Завантажити</button>
                        </form>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p>У вас немає придбаних семплів</p>
        {% endif %}
    </div>
</div>
{% endblock %}